<script>
    $(function(){
        var component_ID = {
            type: "tab",
            demo: true,
            version: 1.7,
            kind: "component",
            name: "edit-material-tab.html",
            description: "edit outfit material alive.",
        };
    });
</script>

<style>
    .selected {
        box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(0, 142, 255, 1);
    }
    #material-title {
        color:#ffffff;
        background:none;
    }
    .material-value {
        text-align: center;
        font-size: x-large;
        font-weight: bold;
    }
    
    .material-textfield {
        width:70%;
        float:right;
    }
    .x-large {
        font-size: x-large;
    }
    
    .material-property-controls {
        height:72px;
    }
    .material-textfield {
        width:75%;
    }
    .uuid-material-textfield {
        width:80%;
    }
    .material-checkbox {
        width:34px;
    }
    .texture-checkbox {
        height:40px;
        margin-top:0px;
        margin-bottom:0px;
    }
    .material-input-number {
        width: 60px;
        padding: 0;
        text-align: right;
        background: none;
        font-weight: bold;
        font-size: 18px;
        border: none;
        color: #ffff;
    }
    .helpers-header h2 { 
        cursor:pointer; 
    }
    #material-property-controls {
        background:none;
        border-radius:8px;
        height:73px;
    }
    .catalog-item {
        width:85px;
        height:85px;
        margin:4px;
        background-size: contain;
        background-position:50% 50%;
        background-repeat:no-repeat;
    }
    
    .sp-container {
        width:100%;
    }
    .sp-picker-container {
        width:93%;
    }
</style>

<div class="helpers-header material-header">
    <h2 style="margin-bottom:20px;">Edit Material:</h2>
</div>

<div id="material-editor-panel">

<!--
    <div style="margin-bottom:20px;">
        <input type="text" id="material-title" class="form-control text-center x-large material-title-field" placeholder="material name">
    </div>

    <div style="height:35px;margin-bottom:10px;">
        <h4><span style="vertical-align:-0.5rem;">Select gender:</span>
            <div style="width:40%;display:inline-block;float:right;">
                <select id="material-gender-droplist" class="form-control gender droplist" readonly>
                    <option value="">Select sex:</option>
                    <option value="male">male</option>
                    <option value="female">female</option>
                </select>
            </div>
        </h4>
    </div>
-->

    <div style="height:35px;margin-bottom:10px;">
        <h4><span style="vertical-align:-0.5rem;">Select outfit slot:</span>
            <div style="width:40%;display:inline-block;float:right;">
                <select id="outfit-slot" class="form-control outfit-slot-droplist" readonly>
                    <option value="">Select slot:</option>
                    <option value="body">body</option>
                    <option value="eyes">eyes</option>
                    <option value="hairs">hairs</option>
                    <option value="stockings">stockings</option>
                    <option value="underwears">underwears</option>
                    <option value="costume">costume</option>
                    <option value="tshirt">tshirt</option>
                    <option value="trousers">trousers</option>
                    <option value="dress">dress</option>
                    <option value="shoes">shoes</option>
                </select>
            </div>
        </h4>
    </div>

    <div style="height:35px;margin-bottom:10px;">
        <h4><span style="vertical-align:-0.5rem;">Select property:</span>
            <div style="width:40%;display:inline-block;float:right;">
                <select id="material-property" class="form-control material-property-droplist" readonly>
                    <option value="">Select key:</option>
                </select>
            </div>
        </h4>
    </div>

    <div id="material-property-controls" class="well"></div>

    <div style="margin-bottom:10px;height:35px;">
        <div id="save-material-button" class="form-control btn btn-success btn-white-outline gradient-btn pull-left" style="width:49%;">Save</div>
    <!-- div id="apply-material-button" class="form-control btn btn-info btn-white-outline gradient-btn" style="width:50%;margin:0 1%;">Apply</div -->
        <div id="reset-material-button" class="form-control btn btn-danger btn-white-outline gradient-btn pull-right" style="width:49%;">Reset</div>
    </div>

</div>

<hr/>


<script>

loadjs(["/three/three.js", "/material/materialtoJson.js"], function(){

    var gender, material;

    const viewer = document.getElementById("viewer");
    const materialEditorPanel = document.getElementById("material-editor-panel");
    const slotDroplist = $(materialEditorPanel).find("select#outfit-slot").get(0);
    const propDroplist = $(materialEditorPanel).find("select#material-property").get(0);
    const propControls = $(materialEditorPanel).find("#material-property-controls").get(0);

    $(slotDroplist).on("change", function(){

        gender = viewer.contentWindow.localPlayer.outfit.getGender();
        material = viewer.contentWindow[ gender ][this.value].material;
        debugMode && console.log({"gender":gender, "material":material});

    });


});

</script>




